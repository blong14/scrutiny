{
    log {
        output stdout
        format console
    }
}

scrutiny.local:8081 {
    encode zstd gzip
    route {
        mercure {
            publisher_jwt !ChangeMe!
            subscriber_jwt !ChangeMe!
            anonymous true
            ui true
        }
        reverse_proxy varnish:80 {
            transport http {
                max_conns_per_host 10
            }
        }
        respond "Not Found" 404
    }
}

scrutiny.local:8082 {
    route {
        reverse_proxy jaeger:16686
        respond "Not Found" 404
    }
}
